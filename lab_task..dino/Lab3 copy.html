<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
            canvas{width: 100%; height: 100%;}
		</style>
	</head>
	<body>
            <input type="file" name="inputfile"
            id="inputfile">
      	<script src="../js/three.js"></script>
		<script>

document.getElementById('inputfile')
            .addEventListener('change', function() {



                let polylinesarr= [];
     var cor = [];
     let arrs=[];
            var fr=new FileReader();
            fr.onload=function(){
                var scene = new THREE.Scene();
                var dino = new THREE.Group()
var camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 100);
camera.position.set(0, 5, 15);
camera.lookAt(0, 5, 5);
camera.up.set(0,0,1);
var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
console.log(arrs)
renderer.render( scene, camera );


var lines = fr.result.split("\r\n");
var polylines;
var pointsInPolylines;



for(j=0; j < lines.length; j++)
{
  lines[j] = lines[j].replace(/["]/g,'');
  cor[j] = lines[j].split(",");

 

}

for(var k =1; k<cor.length; k++ ){
    polylines =parseInt(cor[0][0]) ;
    
console.log(polylines)
    for(var i =0; i<polylines; i++ )
{
    pointsInPolylines = parseInt(cor[k][0]) 
    k++;
    console.log(pointsInPolylines)

    poipoly = [];
    for(j=0; j< pointsInPolylines;  j++)
    {
        let x = parseInt(cor[k][0].split(" ")[0] )  
        let y =parseInt(cor[k][0].split(" ")[1] )
        k++;
        x=x/100
        y=y/100
     poipoly.push(new THREE.Vector3(x, y,0));
     
    }  
    polylinesarr.push(poipoly);




}
console.log(polylinesarr);

for(var p=0; p<polylinesarr.length ; p++)
    {
      console.log(polylinesarr[p])
     const material = new THREE.LineBasicMaterial( { color: "white" } );
    const geometry = new THREE.BufferGeometry().setFromPoints( polylinesarr[p]);
    const line = new THREE.Line( geometry, material );
   
    dino.add(line);
    console.log(line)
    renderer.render( scene, camera );
    }
   scene.add(dino)
   console.log(dino)
    renderer.render( scene, camera );
  
}

document.addEventListener('keydown', (event) => {
    if(event.key==='ArrowRight'){

        if(dino.position.x===8){
        console.log(dino.position)  
     }
     else{
        dino.position.x+=1;
     console.log(dino.position)
     renderer.render( scene, camera );
     }
   
 }
else if(event.key==='ArrowLeft'){
    if(dino.position.x===-8){
        console.log(dino.position)  
     }
     else{
        dino.position.x-=1;
 
     renderer.render( scene, camera );
     }
   
 }
 else if(event.key==='ArrowDown'){
    if(dino.position.y===-5){
        console.log(dino.position)  
     }
     else{
        dino.position.y-=1;
     console.log(dino.position)  
     renderer.render( scene, camera );
     }
     
 } else if(event.key==='ArrowUp'){
    if(dino.position.y===8){
        console.log(dino.position)  
     }else{
        dino.position.y+=1;
     console.log(dino.position)  
     renderer.render( scene, camera );
     }
  
 }
 else if(event.key==='z'){
     dino.scale.y+=1;
     dino.scale.x+=1;
     console.log(dino.scale)
     renderer.render( scene, camera );
 }
 else if(event.key==='c'){
     
    if(dino.scale.x===1){
        console.log(dino.scale)
    }
    else{
        dino.scale.y-=1;
     dino.scale.x-=1;
     console.log(dino.scale)
     renderer.render( scene, camera );
    }

 }
 else if(event.key==='q'){
     dino.rotation.y+=0.1;
    
     renderer.render( scene, camera );
 }
 else if(event.key==='e'){
     dino.rotation.y-=0.1;
    
     renderer.render( scene, camera );
 }
 
})

const animate = function () {
    requestAnimationFrame( animate );
   
     dino.rotation.x+=0.01
     dino.rotation.y+=0.01
    renderer.render( scene, camera );
};
 //  animate()  
 
renderer.render( scene, camera );

          }
              
            fr.readAsText(this.files[0]);
        })

	

		</script>
	</body>
</html>